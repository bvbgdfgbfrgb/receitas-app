<!DOCTYPE html>

<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Receitas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
    }

    .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .header p {
        color: #666;
        font-size: 1.1rem;
    }

    .input-section {
        margin-bottom: 30px;
    }

    .url-input {
        width: 100%;
        padding: 20px;
        border: 2px solid #e1e5e9;
        border-radius: 12px;
        font-size: 16px;
        margin-bottom: 20px;
        transition: all 0.3s ease;
    }

    .url-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .btn {
        width: 100%;
        padding: 20px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
    }

    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255,255,255,.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    .result-section {
        margin-top: 30px;
        display: none;
    }

    .result-content {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 30px;
        border-left: 4px solid #667eea;
    }

    .result-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 20px;
        color: #2d3748;
    }

    .transcription {
        line-height: 1.8;
        color: #4a5568;
        white-space: pre-wrap;
        background: white;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        max-height: 400px;
        overflow-y: auto;
    }

    .error {
        background: #fed7d7;
        color: #c53030;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        border-left: 4px solid #e53e3e;
    }

    .success {
        background: #c6f6d5;
        color: #22543d;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        border-left: 4px solid #38a169;
    }

    .copy-btn {
        background: #4299e1;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        margin-top: 15px;
        transition: background 0.3s ease;
    }

    .copy-btn:hover {
        background: #3182ce;
    }

    .examples {
        margin-top: 20px;
        padding: 20px;
        background: rgba(102, 126, 234, 0.05);
        border-radius: 12px;
    }

    .examples h3 {
        margin-bottom: 15px;
        color: #4a5568;
    }

    .example-urls {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .example-url {
        padding: 10px 15px;
        background: white;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid #e2e8f0;
        font-size: 14px;
        color: #667eea;
    }

    .example-url:hover {
        background: #f7fafc;
        border-color: #667eea;
    }

    @media (max-width: 768px) {
        .container {
            padding: 20px;
            margin: 10px;
        }
        
        .header h1 {
            font-size: 2rem;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç≥ Extrator de Receitas</h1>
            <p>Insira qualquer URL e obtenha a transcri√ß√£o da receita</p>
        </div>

```
    <div class="input-section">
        <input 
            type="text" 
            class="url-input" 
            placeholder="Cole aqui o link do YouTube, TikTok, Instagram, blog culin√°rio..." 
            id="urlInput"
        >
        <button class="btn" onclick="extractRecipe()" id="extractBtn">
            <span id="btnText">ü§ñ Extrair Receita</span>
            <span class="loading" id="loading" style="display: none;"></span>
        </button>
    </div>

    <div class="examples">
        <h3>Exemplos de URLs suportadas:</h3>
        <div class="example-urls">
            <div class="example-url" onclick="fillExample('https://www.youtube.com/watch?v=dQw4w9WgXcQ')">
                üì∫ YouTube - V√≠deo de receita
            </div>
            <div class="example-url" onclick="fillExample('https://www.instagram.com/p/example/')">
                üì∏ Instagram - Post de receita
            </div>
            <div class="example-url" onclick="fillExample('https://www.tiktok.com/@chef/video/example')">
                üéµ TikTok - V√≠deo de culin√°ria
            </div>
            <div class="example-url" onclick="fillExample('https://example-food-blog.com/receita-bacalhau')">
                üìù Blog culin√°rio
            </div>
        </div>
    </div>

    <div class="result-section" id="resultSection">
        <div class="result-content">
            <div class="result-title">üìã Transcri√ß√£o da Receita</div>
            <div class="transcription" id="transcription"></div>
            <button class="copy-btn" onclick="copyToClipboard()">üìã Copiar Transcri√ß√£o</button>
        </div>
    </div>
</div>

<script>
    // Configura√ß√£o da API Gemini
    const GEMINI_API_KEY = 'AIzaSyAvZMAZXiEY5zc3qKT-e3ahBzRsjVmCqlk'; // SUBSTITUI PELA TUA CHAVE
    const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';

    async function extractRecipe() {
        const url = document.getElementById('urlInput').value.trim();
        
        if (!url) {
            showError('Por favor, insira uma URL v√°lida.');
            return;
        }

        // Validate URL format
        if (!isValidUrl(url)) {
            showError('URL inv√°lida. Por favor, insira um link v√°lido.');
            return;
        }

        const btnText = document.getElementById('btnText');
        const loading = document.getElementById('loading');
        const btn = document.getElementById('extractBtn');
        
        // Show loading state
        btnText.style.display = 'none';
        loading.style.display = 'inline-block';
        btn.disabled = true;

        try {
            // Tentar usar a API real do Gemini
            const result = await extractWithGeminiAPI(url);
            showResult(result);
            
        } catch (error) {
            console.error('Erro API Gemini:', error);
            // Fallback para simula√ß√£o se API falhar
            const result = await simulateRecipeExtraction(url);
            showResult(result);
            showError('‚ö†Ô∏è Usando modo de demonstra√ß√£o. Configure a API Gemini para funcionalidade completa.');
        } finally {
            // Reset button state
            btnText.style.display = 'inline';
            loading.style.display = 'none';
            btn.disabled = false;
        }
    }

    async function extractWithGeminiAPI(url) {
        const prompt = `
            Analisa este URL e extrai APENAS a informa√ß√£o da receita: ${url}
            
            Por favor, retorna a receita no seguinte formato limpo:
            
            T√çTULO: [Nome da receita]
            
            INGREDIENTES:
            - [ingrediente 1 com quantidade]
            - [ingrediente 2 com quantidade]
            - [etc...]
            
            INSTRU√á√ïES:
            1. [passo 1]
            2. [passo 2]
            3. [etc...]
            
            TEMPO DE PREPARO: [X minutos]
            POR√á√ïES: [X pessoas]
            
            Se n√£o conseguires extrair a receita, diz apenas "N√£o foi poss√≠vel extrair receita desta URL".
        `;

        const response = await fetch(GEMINI_API_URL + '?key=' + GEMINI_API_KEY, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                contents: [{
                    parts: [{
                        text: prompt
                    }]
                }]
            })
        });

        if (!response.ok) {
            throw new Error(`API Error: ${response.status}`);
        }

        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
    }

    async function simulateRecipeExtraction(url) {
        // Simulate API delay
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Simulate different responses based on URL
        const domain = extractDomain(url);
        
        const sampleRecipes = {
            'youtube.com': `T√çTULO: Bacalhau √† Br√°s Tradicional
```

INGREDIENTES:

- 400g de bacalhau desfiado
- 500g de batata palha
- 6 ovos
- 2 cebolas m√©dias
- 3 dentes de alho
- Azeite q.b.
- Salsa picada
- Azeitonas pretas
- Pimenta a gosto

INSTRU√á√ïES:

1. Numa frigideira, aque√ßa o azeite e refogue a cebola e o alho at√© ficarem dourados.
1. Adicione o bacalhau desfiado e deixe refogar por alguns minutos.
1. Bata os ovos numa tigela e tempere com pimenta.
1. Junte os ovos batidos ao bacalhau e mexa suavemente.
1. Adicione a batata palha e envolva delicadamente.
1. Finalize com salsa picada e azeitonas.
1. Sirva imediatamente.

TEMPO DE PREPARO: 25 minutos
POR√á√ïES: 4 pessoas`,

```
            'instagram.com': `T√çTULO: Past√©is de Nata Caseiros
```

INGREDIENTES:

- 1 rolo de massa folhada
- 500ml de nata
- 200g de a√ß√∫car
- 6 gemas de ovo
- 1 colher de sopa de farinha
- Canela em p√≥
- Raspa de lim√£o

INSTRU√á√ïES:

1. Pr√©-aque√ßa o forno a 250¬∞C.
1. Corte a massa folhada em c√≠rculos e forre as formas.
1. Numa panela, aque√ßa a nata com a raspa de lim√£o.
1. Misture o a√ß√∫car, as gemas e a farinha.
1. Junte a nata quente √† mistura de ovos, mexendo sempre.
1. Deite o creme nas formas.
1. Asse por 15-20 minutos at√© dourar.
1. Polvilhe com canela antes de servir.

TEMPO DE PREPARO: 30 minutos
POR√á√ïES: 12 past√©is`,

```
            'tiktok.com': `T√çTULO: Francesinha R√°pida
```

INGREDIENTES:

- 2 fatias de p√£o
- 100g de fiambre
- 100g de lingui√ßa
- 1 bife pequeno
- Queijo para gratinar
- 1 ovo

Para o molho:

- 1 lata de cerveja
- 2 colheres de sopa de farinha
- 1 cubo de caldo
- Mostarda
- Ketchup

INSTRU√á√ïES:

1. Grelhe o bife e a lingui√ßa.
1. Monte a sandu√≠che: p√£o, fiambre, lingui√ßa, bife.
1. Cubra com queijo.
1. Para o molho: misture todos os ingredientes numa panela e cozinhe at√© engrossar.
1. Verta o molho sobre a francesinha.
1. Leve ao forno at√© o queijo derreter.
1. Sirva com ovo estrelado por cima.

TEMPO DE PREPARO: 20 minutos
POR√á√ïES: 1 pessoa`,

```
            'default': `T√çTULO: Caldo Verde Tradicional
```

INGREDIENTES:

- 300g de chouri√ßo
- 500g de batatas
- 200g de couve galega
- 1 cebola
- 2 dentes de alho
- Azeite
- Sal e pimenta

INSTRU√á√ïES:

1. Descasque e corte as batatas em peda√ßos.
1. Numa panela, refogue a cebola e o alho no azeite.
1. Adicione as batatas e cubra com √°gua.
1. Cozinhe at√© as batatas estarem macias.
1. Triture parcialmente as batatas.
1. Corte a couve em juliana fina.
1. Adicione a couve e o chouri√ßo √†s rodelas.
1. Cozinhe por mais 5 minutos.
1. Tempere com sal e pimenta.
1. Sirva bem quente com um fio de azeite.

TEMPO DE PREPARO: 35 minutos
POR√á√ïES: 6 pessoas`
};

```
        return sampleRecipes[domain] || sampleRecipes['default'];
    }

    function extractDomain(url) {
        try {
            const hostname = new URL(url).hostname;
            if (hostname.includes('youtube.com') || hostname.includes('youtu.be')) return 'youtube.com';
            if (hostname.includes('instagram.com')) return 'instagram.com';
            if (hostname.includes('tiktok.com')) return 'tiktok.com';
            return 'default';
        } catch {
            return 'default';
        }
    }

    function isValidUrl(string) {
        try {
            new URL(string);
            return true;
        } catch (_) {
            return false;
        }
    }

    function showResult(transcription) {
        document.getElementById('transcription').textContent = transcription;
        document.getElementById('resultSection').style.display = 'block';
        
        // Scroll to result
        document.getElementById('resultSection').scrollIntoView({ 
            behavior: 'smooth' 
        });
        
        // Show success message
        showSuccess('‚úÖ Receita extra√≠da com sucesso!');
    }

    function showError(message) {
        // Remove existing messages
        removeMessages();
        
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error';
        errorDiv.textContent = message;
        
        document.querySelector('.input-section').appendChild(errorDiv);
        
        // Auto remove after 5 seconds
        setTimeout(() => {
            errorDiv.remove();
        }, 5000);
    }

    function showSuccess(message) {
        // Remove existing messages
        removeMessages();
        
        const successDiv = document.createElement('div');
        successDiv.className = 'success';
        successDiv.textContent = message;
        
        document.querySelector('.input-section').appendChild(successDiv);
        
        // Auto remove after 3 seconds
        setTimeout(() => {
            successDiv.remove();
        }, 3000);
    }

    function removeMessages() {
        document.querySelectorAll('.error, .success').forEach(el => el.remove());
    }

    function fillExample(url) {
        document.getElementById('urlInput').value = url;
        document.getElementById('urlInput').focus();
    }

    function copyToClipboard() {
        const transcription = document.getElementById('transcription').textContent;
        
        if (navigator.clipboard) {
            navigator.clipboard.writeText(transcription).then(() => {
                showSuccess('üìã Transcri√ß√£o copiada para a √°rea de transfer√™ncia!');
            });
        } else {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = transcription;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            showSuccess('üìã Transcri√ß√£o copiada!');
        }
    }

    // Enter key support
    document.getElementById('urlInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            extractRecipe();
        }
    });

    // Auto-focus on input
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('urlInput').focus();
    });
</script>
```

</body>
</html>
